# WsExample-master
4 практика по АКСП. 3 прошлые практик размещены в трех отдельных репо-ях ниже.

Configuration.java
	8/9 - Говорим спрингу, что данный класс является конфигурационным и подключаем вебсокеты.
	10 - Обязательно имплементируем инерфейс WebSocketMessageBrokerConfigurer, дабы настроить вебсокеты.
	14 - Указываем префикс для урла, на который вебсокет будет отправлять сообщения.
	15 - Префикс урла вебсокета для отправки сообщения. (поскольку на 20 строчке мы указали урл, то полный урл для отправки сообщения будет: /app/webs)
	20/21 - Указываем урл, по которому мы будем подключаться к вебсокету.

Message.java
	Просто модель, в которой есть одно поле для сообщения, которое мы получаем от пользователя и отправляем ему обратно.

IndexController.java
	6 - Указываем, что класс является контроллером.
	9 - Указываем, что этот метод будет вызываться по гет запросу на корень сервера, ибо никакой урл в параметрах не указан(/).
	11 - Указываем название представления(HTML страницы), которое будет возвращено пользователю, который перейдёт по ссылке.

WebSocketController.java
	7 - Указываем, что класс является рест-контроллером. Эта аннотация отличается от обычного контроллера только тем, что она объединяет в себе аннотацию @Controller и @ResponseBody.
	10 - Указываем аннотацией, на какой урл будет реагировать метод.
	11 - Указывает, по какому урлу отсылать сообщение.
	12 - Просто получаем сообщение по урлу, указанному в Configuration на 15 строчке, при этом спринг автоматически парсит JSON и преобразует его в объект Message(название полей объекта и ключей JSON должны сходиться), и отправляем его обратно.

	Принцип работы простой. Есть некий сервер, к которому подключаются разные "слушатели" по урлу /webs, после того как на сервер по урлу /app/webs приходит сообщение, он отправляет что то, что мы укажем(в нашем случае это объект Message), всем "слушателям" по урлу /topic/messages.



index.html
	5/6 - Подключаем библиотеки STOMP и SockJS.
	18 - Функция, в которой происходит подключение к серверу по вебсокету.
	19 - В параметрах объекта указываем урл к нашему вебсокету.
	21 - Указываем, что должно проихойти при успешном подключении к серверу.
	24 - Подписываемся на получение сообщений с сервера по урлу /topic/messages, вторым же параметром указываем то, что должно произойти если вдруг мы случайно получим сообщение от сервера.
	30 - Функция, которая будет вызываться, когда кликнем кнопку "Отключиться"
	38 - Функция, которая будет вызываться при отправке сообщения.
	40 - Первым параметром указываем урл, по которому будем отправлять сообщение(/app/webs), 3-им же параметром указываем то, что мы будем отправлять. 
